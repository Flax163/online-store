{"version":3,"sources":["onlineStore.js","model/metadataUser.js","service/AuthorizationService.js","service/CartService.js","service/CategoryService.js","service/OfferService.js","component/about/about.js","component/offersInCategories/offersInCategories.js","component/topMenu/topMenu.js","component/welcome/welcome.js","component/cart/cart.js","component/detailOffer/detailOffer.js","dialog/signIn/signIn.js"],"names":["OnlineStoreComponent","$cookies","authorizationService","metadataUser","this","$onInit","token","get","undefined","save","authorization","angular","module","config","$locationProvider","html5Mode","value","component","template","controller","$routeConfig","path","name","useAsDefault","factory","tokenUser","isAuthorization","notAuthorization","setToken","getToken","$resource","OffersInCategoriesComponent","offerService","$routerOnActivate","next","offers","query","idCategory","params","id","TopMenuComponent","categoryService","ctrl","categories","singOut","remove","CartComponent","cartService","offersInCart","DetailOfferComponent","offerDetail","idOffer","SignInDialog","$cookieStore","user","rememberUser","authData","login","password","data","authorizationMessage","$","modal","put"],"mappings":"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","file":"application.js","sourcesContent":["(function () {\n    'use strict';\n\n    function OnlineStoreComponent($cookies, authorizationService, metadataUser) {\n        this.$onInit = function() {\n            var token = $cookies.get('token');\n            if (token !== undefined) {\n                authorizationService.save(token, function () {\n                    metadataUser.authorization();\n                });\n            }\n        };\n    }\n\n    angular.module('onlineStore', ['ngComponentRouter', 'ngResource', 'ngCookies'])\n        .config(function($locationProvider) {\n            $locationProvider.html5Mode(true);\n        })\n        .value('$routerRootComponent', 'onlineStore')\n        .component('onlineStore', {\n            templateUrl: 'onlineStore.html',\n            controller: ['$cookies', 'authorizationService', 'metadataUser', OnlineStoreComponent],\n            $routeConfig: [\n                {path: '/', name: 'Welcome', component: 'welcome', useAsDefault: true},\n                {path: '/category/:id', name: 'OffersInCategories', component: 'offersInCategories'},\n                {path: '/offer/:id', name: 'DetailOffer', component: 'detailOffer'},\n                {path: '/about', name: 'About', component: 'about'},\n                {path: '/cart', name:'Cart', component: 'cart'}\n            ]\n        })\n})();","(function() {\n    'use strict';\n\n    angular.module('onlineStore')\n        .factory('metadataUser', function() {\n            var metadataUser = {};\n            var isAuthorization = false;\n            var tokenUser;\n            metadataUser.isAuthorization = function () {\n                return isAuthorization;\n            };\n            metadataUser.authorization = function () {\n                isAuthorization = true;\n            };\n            metadataUser.notAuthorization = function () {\n                isAuthorization = false;\n            };\n            metadataUser.setToken = function (token) {\n                tokenUser = token;\n            };\n            metadataUser.getToken = function () {\n                return tokenUser;\n            };\n            return metadataUser;\n        })\n})();","(function() {\n\n    angular.module('onlineStore')\n        .factory('authorizationService', ['$resource',\n            function($resource) {\n                return $resource('/rest/authorization', {}, {});\n        }])\n})();","(function() {\n\n    angular.module('onlineStore')\n        .factory('cartService', ['$resource',\n            function($resource) {\n                return $resource('rest/cart', {}, {});\n            }\n        ])\n})();","(function() {\n\n    angular.module('onlineStore')\n        .factory('categoryService', ['$resource',\n            function($resource) {\n                return $resource('rest/category/:idCategory', {}, {});\n            }\n        ])\n})();","(function() {\n    'use strict';\n\n    angular.module('onlineStore')\n        .factory('offerService', ['$resource',\n            function($resource) {\n                return $resource('rest/category/:idCategory/offer/:idOffer', {}, {});\n            }\n        ])\n\n})();","(function () {\n    'use strict';\n\n    angular.module('onlineStore')\n        .component('about', {\n            templateUrl: 'about.html'\n        })\n})();","(function () {\n    'use strict';\n\n    function OffersInCategoriesComponent(offerService) {\n        this.$routerOnActivate = function(next) {\n            this.offers = offerService.query({idCategory: next.params.id});\n        };\n    }\n\n    angular.module('onlineStore')\n        .component('offersInCategories', {\n            templateUrl: 'offersInCategories.html',\n            controller: ['offerService', OffersInCategoriesComponent]\n        })\n})();","(function () {\n    'use strict';\n\n    function TopMenuComponent(categoryService, metadataUser, $cookies) {\n        var ctrl = this;\n        ctrl.metadataUser = metadataUser;\n        this.categories = categoryService.query();\n\n        this.singOut = function() {\n            ctrl.metadataUser.notAuthorization();\n            $cookies.remove('token', {});\n        }\n    }\n\n    angular.module('onlineStore')\n        .component('topMenu', {\n            templateUrl: 'topMenu.html',\n            controller: ['categoryService', 'metadataUser', '$cookies', TopMenuComponent]\n        });\n})();","(function(){\n\n    angular.module('onlineStore')\n        .component('welcome', {\n            templateUrl: 'welcome.html'\n        });\n})();","(function () {\n    'use strict';\n    function CartComponent(cartService) {\n        this.$routerOnActivate = function(next) {\n            this.offersInCart = cartService.query();\n        };\n    }\n\n    angular.module('onlineStore')\n        .component('cart', {\n            templateUrl: 'cart.html',\n            controller: ['cartService', CartComponent]\n        })\n})();","(function () {\n    'use strict';\n\n    function DetailOfferComponent(offerService) {\n        this.$routerOnActivate = function(next) {\n            this.offerDetail = offerService.get({idOffer: next.params.idOffer});\n        };\n    }\n\n    angular.module('onlineStore')\n        .component('detailOffer', {\n            templateUrl: 'detailOffer.html',\n            controller: ['offerService', DetailOfferComponent]\n        })\n})();\n","(function() {\n    \"use strict\";\n\n    function SignInDialog(authorizationService, metadataUser, $cookieStore) {\n        var ctrl = this;\n        this.authorization = function(user, rememberUser) {\n            var authData = {login: user.login, password: user.password};\n            authorizationService.save(authData, function(data) {\n                ctrl.authorizationMessage = '';\n                metadataUser.authorization();\n                $('#signInDialog').modal(\"hide\");\n                if (rememberUser) {\n                    $cookieStore.put('token', {token: data.token});\n                }\n            }, function(data) {\n                ctrl.authorizationMessage = 'Не удалось авторизоваться';\n            });\n        };\n    }\n\n    angular.module('onlineStore')\n        .component('signInDialog', {\n            templateUrl: 'signIn.html',\n            controller: ['authorizationService', 'metadataUser', '$cookieStore', SignInDialog]\n        });\n})();"]}